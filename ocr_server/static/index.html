<!DOCTYPE html >
<html lang="en">
<head >
    <meta charset="utf-8">
    <title>发票验证平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="/static/css/swiper.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/invoiceVerify.css"/>

    <!-- Demo styles -->
    <style>
        body {
            width: 100%;
            background: #ffffff;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color:#000;
            margin: 0 auto;
            padding: 0;
        }
    </style>
</head>

<body>
<div>
<h1 style="margin-left: 45%;margin-top:20px; color: #000066; height:80px">发票验证平台
<!--button id = "getVerify_list" style="margin-left: 5%;margin-top:30px;font-size: 20px" onclick="getTaskList()">
获取发票列表 </button-->
</h1>
<h3 style="margin-left: 48%;  color: #343a40; height:50px">
    <a href="/static/invoiceList.html" >查看发票列表</a>
    <a href="/static/upload.html" >上传发票信息</a-->
</h3>
</div>
<div class="picture">
    <div class="picture_bottom">
        <div class="picture_left">
            <div class="picture_img">
                <div class="picture_img2">
                  <img id = "imgShow" src="/static/img/example_invoice.png" class="showImg" />
                </div>
            </div>
        </div>
    <div class = "picture_right">
                <div class="picture_info">
                    <h2 style="margin-left: 30%;color: #000066; height:40px">发票信息</h2>
                    <h4>发票代码：
                        <img id = "invoiceID" src="/static/img/example_invoceID.png" width="120" height="30" style="height:25px;display: inline-block; vertical-align: middle;" />
                        <input type="text" style="font-size:16px; width:140px; height:25px; display: inline-block; vertical-align: middle;" id="textInvoiceID" value="1100094140" >
                    </h4>
                </div>
                <div class="picture_info">
                    <h4>发票号码：
                        <img id = "invoiceNum" src = "/static/img/example_invoceNum.png"   width="120" height="30" style="height:25px;display: inline-block; vertical-align: middle;" />
                        <input type="text" style=" font-size:16px; width:140px; height:25px; display: inline-block; vertical-align: middle;" id="textInvoiceNum" value="87654321">
                    </h4>
               </div>
                <div class="picture_info">

                <h4>购买方名称：
                    <input type="text"  id="PurchaserName" value="测试购方企业" style="font-size:16px; width:253px ;height:25px; display: inline-block; vertical-align: middle;"  >
                </h4>
                </div>
                <div class="picture_info">
                    <h4>购买方税号：
                        <input type="text" id="PurchaserRegisterNum" value="410305123456789" style="font-size:16px; width:253px ;height:25px; display: inline-block; vertical-align: middle;"  >
                    </h4>
                </div>
                <div class="picture_info">
                <h4>销售方名称：
                    <input type="text" id="SellerName" value="测试销方企业" style="font-size:16px;  width:253px ;height:25px; display: inline-block; vertical-align: middle;"  >
                </h4>
                </div>
                <div class="picture_info">
                    <h4>销售方税号：
                        <input type="text" id="SellerRegisterNum" value="410305012345678" style="font-size:16px; width:253px ; height:25px; display: inline-block   ; vertical-align: middle;" >
                    </h4>
                </div>
                 <div class="picture_info">
                    <h4>金额：
                        <input type="text" id="TotalAmount"  value="5999.00" style="font-size:16px; width:295px ;height:25px; display: inline-block; vertical-align: middle;" >
                    </h4>
                 </div>
                <div class="picture_info">
                    <input type="submit" id = "uploadInvoiceInfo" onclick="" style="margin-left:30%; background: #3b5998;width: 100px; height: 34px; color: #fff;letter-spacing: 1px; border-bottom: 1px solid #2d78f4; font-size: 16px" value="确认提交" class="s_btn">
                </div>
        </div>
    </div>


    <!--div class="picture_center" >
        <div class="picture_info" style=" margin-left: 25%; margin-top:20px">
            <h4>发票代码：
                <img id = "invoiceID" src="/static/img/example_invoceID.png" width="160" height="30" style="height:30px;display: inline-block; vertical-align: middle;" />
                <input type="text" style="font-size:16px; width:150px; height:25px; display: inline-block; vertical-align: middle;" id="textInvoiceID" value="1100094140" >
            </h4>
        </div>

        <div class="picture_info" style=" margin-left: 25%">
            <h4>发票号码：
                <img id = "invoiceNum" src = "/static/img/example_invoceNum.png"   width="160" height="30" style="height:30px;display: inline-block; vertical-align: middle;" />
                <input type="text" style=" font-size:16px; width:150px; height:25px; display: inline-block; vertical-align: middle;" id="textInvoiceNum" value="87654321">
                <input type="submit" id = "uploadInvoiceInfo" onclick="" style="background: #3b5998;width: 100px; height: 34px; color: #fff;letter-spacing: 1px; border-bottom: 1px solid #2d78f4; font-size: 16px" value="确认提交" class="s_btn">

            </h4>
        </div>

    </div-->
    <!-- Swiper -->
    <div class="swiper-container">
        <div class="swiper-wrapper"></div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

</div>

<script src="/static/js/invoiceVerify.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/js/swiper.min.js"></script>
<script src="/static/js/jquery-1.4.2.js" type="text/javascript" charset="utf-8"></script>

<script>
 $(document).ready(function(){
    var usr_id = 2;
    var tasklist = getTaskList(usr_id);
    var tasklistNum = getTasklistNum(usr_id);
    var taskIdTxt;
    onload();

    function onload(){

        var swiper = new Swiper('.swiper-container', {
                slidesPerView:8,
                centeredSlides: true,
                spaceBetween: tasklistNum,
                pagination: {
                    el: '.swiper-pagination',
                    type: 'fraction',
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                virtual: {
                    slides: (function () {
                        var slides = [];
                        for (var i = 0; i<tasklistNum; i+=1) {
                            //slides.push("Slide "+(tasklist[i].slice(0,5)));
                            num = i + 1
                            slides.push(" 发票 " + num);
                        }
                    return slides;
                    }()),
                },
                on:{
                    click:function () {
                        if (this.clickedIndex == undefined)
                        {
                            console.log("index underfined")
                        }
                        else
                        {
                            var task_ID = tasklist[this.clickedIndex];
                            taskIdTxt = task_ID;
                            // alert(task_ID);
                            getInvoiceDetails(usr_id,task_ID);
                        }
                    }
                }

        });
    }

    $("#uploadInvoiceInfo").click(function() {
        var InvoiceCode =  document.getElementById("textInvoiceID").value;
        var InvoiceNum =  document.getElementById("textInvoiceNum").value;
        var PurchaserName =  document.getElementById("PurchaserName").value;
        var PurchaserRegisterNum =  document.getElementById("PurchaserRegisterNum").value;
        var SellerName =  document.getElementById("SellerName").value;
        var SellerRegisterNum =  document.getElementById("SellerRegisterNum").value;
        var TotalAmount =  document.getElementById("TotalAmount").value;

        strUrl = "http://180ly66419.iok.la:5000/api/insert/result?1=1&user_id=" + usr_id;
		strJson = JSON.stringify(GetJsonData(usr_id, taskIdTxt,InvoiceCode, InvoiceNum, PurchaserName,PurchaserRegisterNum,SellerName,SellerRegisterNum,TotalAmount));

		$.post(strUrl, strJson,
			function(data,status){
                var msg = (status == "success") ?"成功" : "失败";
				alert("修改" + msg);
            }, "json"
        );

    });

    function GetJsonData(usr_id, task_id,InvoiceCode,InvoiceNum,PurchaserName,PurchaserRegisterNum,SellerName,SellerRegisterNum,TotalAmount ) {
        var json = {
            "user_id": usr_id.toString(),
            "task_id": task_id.toString(),
            "words_result": {
                "InvoiceCode": InvoiceCode,
                "InvoiceNum": InvoiceNum,
                "PurchaserName": PurchaserName,
                "PurchaserRegisterNum":PurchaserRegisterNum,
                "SellerName":SellerName,
                "SellerRegisterNum":SellerRegisterNum,
                "TotalAmount":TotalAmount
            }

        };
        return json;
    }

});
</script>
</body>
</html>
